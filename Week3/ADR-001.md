## ADR-001
### Выбор архитектурного стиля
### Status : Accepted
### Context
На основе требований и консернов стейкхолжеров было принято решение, что необходимо реализовать систему из 11 баундуд-контекстов.
Каждай характеристика была выявлена по следующим причинам:
- scalability и elasticity, для "Регистрация заказов" и "Управление выполненим заказов" после понимания о том, что нагрузка растет очень быстро, это нам озвучили менеджеры. А так же modifyability и maintainabilty т.к. это core поддомен
- consistency и modifiability в "списание и начисление средств" после общения с фин отделом и их консернами по поводу сохранности данных.
- modifyability и maintainabilty т.к. "Поиск наиболее подходящего обычного образца для заказа" является core поддоменом и simplicity и workflow были требованиями разработки.
- agility, testability, deployability для "Скоринг обычных образцов" из требований к низкому ТТМ . modifyability и maintainabilty, т.к. core поддомен. Evolveability из консвернов топ менеджмента.

Есть так же ряд консернов от стейкхолдеров, которые не описываются характеристиками:
- "Совершение и расчет ставок" менеджеры хотят спрятать от остальных.

Если посмотреть на характеристики баундед-контекстов, то получится, что для большинства подходит микросервисный и service-based стили.
Только "Поиск наиболее подходящего обычного образца для заказа" больше подходит pipeline. 

### Decision: микросервисный стиль
Чтобы выбрать между стилями, то надо решить используется общая база или разные.

- "списание и начисление средств" есть требования к базе - подходит любая БД с поддержкой ACID транзакций.
- "Регистрация заказов" и "Управление выполненим заказов" требуется масштабирование, поэтому отдельная, стоит расмотреть nosql варианты.

По остальным явных требований нет, но стоит обратить внимание на консерны:
- "Поиск наиболее подходящего обычного образца для заказа" вероятнее всего потребуется какая-то специфическая БД под задачи.
- "Скоринг обычных образцов" - есть требования к низкому ТТМ и планы на продажу услуги в дальнешем, таким образом лучше сразу выделить в отдельную БД
-  "Совершение и расчет ставок" менеджеры хотят спрятать от остальных, поэтому отделим их целиком.

Оставшиеся боундед-контексты : "расчет стоимости услуг", "сборка расходных материалов", "анализ отмененных и проваленных заказов" имеют только общую сущность "Заказы", в остальном они обособленные, поэтому лучше для каждой выделить свою БД, чтобы не получить проблемы с совместным использованием.

### Сompliance
Архитектуру будет проверять вручную на основе карты сервисов, которая будет автоматически сгенерируемы при помощи средств распределенной трассировки.
